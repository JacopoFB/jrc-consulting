<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/nav.css">
    <link rel="stylesheet" href="./css/popup.css">
    <title>Contact</title>

    <!-- emailjs service -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>

<body class="flex-rows h100VH">
    <div class="overlay" id="confirmation-popup-overlay">
        <div class="popup" id="confirmation-popup">
            <div class="popup-icon">âœ“</div>
            <h3>Inquiry Sent!</h3>
            <p>Thank you for your message. I have received your inquiry and will get back to you within 2-3 business days.</p>
            <button 
                class="popup-button" 
                onclick="
                    document.getElementById('confirmation-popup-overlay').classList.remove('active')
                "
            >
                Got It
            </button>
        </div>
    </div>

    <section class="flex-grow" style="overflow-y: auto;">
        <div 
            class="overlay" 
            id="burger-menu-overlay"
            onclick="document.getElementById('burger-menu-overlay').classList.remove('active')"
        >
            <div id="burger-menu" onclick="event.stopPropagation()">
                <div>
                    <svg 
                        xmlns="http://www.w3.org/2000/svg" 
                        width="35" height="35" viewBox="0 0 24 24" 
                        fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        onclick="document.getElementById('burger-menu-overlay').classList.remove('active')"
                    >
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </div>  

                <div class="flex-cols" id="burger-links">
                    <a href="./about.html">About</a>
                    <a href="./services.html">Services</a>
                    <a href="./testimonials.html">Testimonials</a>
                    <a href="./contact.html" class="selected">Contact</a>
                </div>
            </div>
        </div>
        <nav id="nav">
            <a href="./about.html">About</a>
            <a href="./services.html">Services</a>
            <a href="./testimonials.html">Testimonials</a>
            <a href="./contact.html" class="selected">Contact</a>

            <!-- Icon to open burger menu -->
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="35" height="35" 
                viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                id="open-burger-menu-icon"
                onclick="document.getElementById('burger-menu-overlay').classList.add('active')"
            >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M4 8l16 0" />
                <path d="M4 16l16 0" />
            </svg>
        </nav>
        <div class="flex-rows page-section margin-center mtop50" id="content-container">
            <div onclick="window.location.href='index.html'" class="logo flex-cols flex-center-justify" id="logo">
                <img src="./images/jrc-logo.png" class="saturate">
            </div>
            <div class="flex-cols mtop35 flex-grow container">
                <h1 class="t-normal t40 ls1 t-bold" id="title">Work With Me</h1>

                <p class="mtop25 para t-italic">
                    Joo Ree offers a free 20-minute consultation for all new clients. 
                    Please submit your request using this Inquiry Form</a>.
                </p>

                <input placeholder="Full Name..." class="text-input mtop50 mbottom25" id="fullname">
                <input 
                    placeholder="Email..." 
                    type="email"
                    class="text-input mbottom25"
                    id="email"
                >
                <input 
                    placeholder="Phone number..." 
                    maxlength="14" 
                    class="text-input mbottom25" 
                    id="phone-number"
                >
                <textarea 
                    placeholder="Describe your need for support..." 
                    class="text-input mbottom25"
                    id="need"
                ></textarea>
                <textarea 
                    placeholder="How did you hear about JRC Partnerships?..." 
                    class="text-input mbottom25"
                    style="min-height: 100px !important;"
                    id="how"
                ></textarea>

                <button class="purple-btn mtop15 mbottom100" id="send-inquiry" style="width: 150px;" onclick="sendInquiry()">Send</button>

                <!-- LOADING GIF WHEN SEND IS PRESSED -->
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="43px"
                    height="43px"
                    viewBox="0 0 100 100"
                    preserveAspectRatio="xMidYMid"
                    id="loading"
                >
                    <g transform="rotate(0 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(30 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(60 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(90 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(120 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(150 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(180 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(210 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(240 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(270 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(300 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite" />
                        </rect>
                    </g>
                    <g transform="rotate(330 50 50)">
                        <rect x="47" y="24" rx="3" ry="6" width="6" height="12" fill="#b2650f">
                            <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite" />
                        </rect>
                    </g>
                </svg>
            </div>
        </div>
    </section>
    <div class="flex-grow page-img" id="page-img"></div>
</body>

<script src="./scripts/phoneNumberField.js"></script>
<script>
    attachPhoneFormatter("#phone-number");

    function sendInquiry() {
        const fullname = document.getElementById('fullname');        
        const email = document.getElementById('email');        
        const phone = document.getElementById('phone-number');        
        const need = document.getElementById('need');        
        const how = document.getElementById('how'); 
        
        // Basic input validation
        if (!fullname.value.trim() || 
            !email.value.trim() || 
            !phone.value.trim() || 
            !need.value.trim() || 
            !how.value.trim()) {
                
            alert("Please fill out all the fields.")
            return; // Stop execution
        }
        
        const publicKey = "znh6Lgwlg3oqicPmn";
        const serviceId = "service_i3utfne";
        const templateId = "template_4v9qj0c";

        emailjs.init(publicKey);
        
        const inputFields = {
            name: fullname.value,
            email: email.value,
            phone: phone.value,
            need: need.value,
            how: how.value,
            reply_to: email.value   // <-- sets the Reply-To header
        };

        
        // set loading gif
        document.getElementById('send-inquiry').style.display = "none";
        document.getElementById('loading').style.display = "block";

        // send inquiry
        emailjs.send(serviceId, templateId, inputFields)
            .then(() => {
                // clear input fields
                fullname.value = "";
                email.value = "";
                phone.value = "";
                need.value = "";
                how.value = "";

                // show popup
                document.getElementById('confirmation-popup-overlay').classList.add('active');
            }, (error) => {
                alert("Something went wrong sending inquiry");
            })
            .finally(() => {
                document.getElementById('send-inquiry').style.display = "block";
                document.getElementById('loading').style.display = "none";
            });
    }
</script>

<style>

#loading { 
    display: none;
    margin-bottom: 100px; 
}

.page-img {
    width: 30%;
    max-width: 900px;

    background-image: url('./images/banner5.jpg');
    background-size: cover;
    background-position: left 50% bottom 0%;
}

section {
    width: 70%;
}

.container { 
    margin-left: 25px; 
    margin-right: 50px;
}

.logo {
    width: 125px;
    min-width: 125px;
    display: block;
    aspect-ratio: 1 / 1;
}

.logo img {
    width: 100%;
    box-sizing: content-box;
    object-fit: contain;
    display: block;
}

.page-section {
    width: 95%;
    max-width: 1000px;
    padding-left: 25px;
    padding-right: 25px;
}

/* text inputs */
.text-input {
    background-color: #eeedef;
    box-shadow: 6px 6px 3px rgba(0,0,0,0.15);
    padding: 15px;
    font-size: 16px;
    outline: none;
    border: none;
    resize: none;
}
input { width: 275px; }
textarea { min-height: 250px; }

/* dymanic resizing */
@media screen and (max-width: 1150px) {
    #page-img { display: none; }   
}

@media screen and (max-width: 700px) {
    #content-container { flex-direction: column; }  
    .container { 
        margin-left: 0px;
        margin-right: 0; 
    } 
}

</style>

</html>